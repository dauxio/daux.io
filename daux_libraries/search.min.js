/*! For license information please see search.min.js.LICENSE.txt */
(()=>{var t={809:()=>{}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}(()=>{"use strict";var t;function e(t,e,n){const i=typeof n,r=typeof t;if("undefined"!==i){if("undefined"!==r){if(n){if("function"===r&&i===r)return function(e){return t(n(e))};if((e=t.constructor)===n.constructor){if(e===Array)return n.concat(t);if(e===Map){var s=new Map(n);for(var o of t)s.set(o[0],o[1]);return s}if(e===Set){for(s of(o=new Set(n),t.values()))o.add(s);return o}}}return t}return n}return"undefined"===r?e:t}function i(t,e){return void 0===t?e:t}function r(){return Object.create(null)}function s(t){return"string"==typeof t}function o(t){return"object"==typeof t}function l(t,e){if(s(e))t=t[e];else for(let n=0;t&&n<e.length;n++)t=t[e[n]];return t}const h=/[^\p{L}\p{N}]+/u,u=/(\d{3})/g,c=/(\D)(\d{3})/g,a=/(\d{3})(\D)/g,f=/[\u0300-\u036f]/g;function p(t={}){if(!this||this.constructor!==p)return new p(...arguments);if(arguments.length)for(t=0;t<arguments.length;t++)this.assign(arguments[t]);else this.assign(t)}function d(t){t.F=null,t.B.clear(),t.D.clear()}function g(t,e,n){n||(e||"object"!=typeof t?"object"==typeof e&&(n=e,e=0):n=t),n&&(t=n.query||t,e=n.limit||e);let i=""+(e||0);n&&(i+=(n.offset||0)+!!n.context+!!n.suggest+(!1!==n.resolve)+(n.resolution||this.resolution)+(n.boost||0)),t=(""+t).toLowerCase(),this.cache||(this.cache=new _);let r=this.cache.get(t+i);if(!r){const s=n&&n.cache;s&&(n.cache=!1),r=this.search(t,e,n),s&&(n.cache=s),this.cache.set(t+i,r)}return r}function _(t){this.limit=t&&!0!==t?t:1e3,this.cache=new Map,this.h=""}(t=p.prototype).assign=function(t){this.normalize=e(t.normalize,!0,this.normalize);let n,i=t.include,r=i||t.exclude||t.split;if(r||""===r){if("object"==typeof r&&r.constructor!==RegExp){let t="";n=!i,i||(t+="\\p{Z}"),r.letter&&(t+="\\p{L}"),r.number&&(t+="\\p{N}",n=!!i),r.symbol&&(t+="\\p{S}"),r.punctuation&&(t+="\\p{P}"),r.control&&(t+="\\p{C}"),(r=r.char)&&(t+="object"==typeof r?r.join(""):r);try{this.split=new RegExp("["+(i?"^":"")+t+"]+","u")}catch(t){this.split=/\s+/}}else this.split=r,n=!1===r||"a1a".split(r).length<2;this.numeric=e(t.numeric,n)}else{try{this.split=e(this.split,h)}catch(t){this.split=/\s+/}this.numeric=e(t.numeric,e(this.numeric,!0))}if(this.prepare=e(t.prepare,null,this.prepare),this.finalize=e(t.finalize,null,this.finalize),r=t.filter,this.filter="function"==typeof r?r:e(r&&new Set(r),null,this.filter),this.dedupe=e(t.dedupe,!0,this.dedupe),this.matcher=e((r=t.matcher)&&new Map(r),null,this.matcher),this.mapper=e((r=t.mapper)&&new Map(r),null,this.mapper),this.stemmer=e((r=t.stemmer)&&new Map(r),null,this.stemmer),this.replacer=e(t.replacer,null,this.replacer),this.minlength=e(t.minlength,1,this.minlength),this.maxlength=e(t.maxlength,1024,this.maxlength),this.rtl=e(t.rtl,!1,this.rtl),(this.cache=r=e(t.cache,!0,this.cache))&&(this.F=null,this.L="number"==typeof r?r:2e5,this.B=new Map,this.D=new Map,this.I=this.H=128),this.h="",this.J=null,this.A="",this.K=null,this.matcher)for(const t of this.matcher.keys())this.h+=(this.h?"|":"")+t;if(this.stemmer)for(const t of this.stemmer.keys())this.A+=(this.A?"|":"")+t;return this},t.addStemmer=function(t,e){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(t,e),this.A+=(this.A?"|":"")+t,this.K=null,this.cache&&d(this),this},t.addFilter=function(t){return"function"==typeof t?this.filter=t:(this.filter||(this.filter=new Set),this.filter.add(t)),this.cache&&d(this),this},t.addMapper=function(t,e){return"object"==typeof t?this.addReplacer(t,e):t.length>1?this.addMatcher(t,e):(this.mapper||(this.mapper=new Map),this.mapper.set(t,e),this.cache&&d(this),this)},t.addMatcher=function(t,e){return"object"==typeof t?this.addReplacer(t,e):t.length<2&&(this.dedupe||this.mapper)?this.addMapper(t,e):(this.matcher||(this.matcher=new Map),this.matcher.set(t,e),this.h+=(this.h?"|":"")+t,this.J=null,this.cache&&d(this),this)},t.addReplacer=function(t,e){return"string"==typeof t?this.addMatcher(t,e):(this.replacer||(this.replacer=[]),this.replacer.push(t,e),this.cache&&d(this),this)},t.encode=function(t,e){if(this.cache&&t.length<=this.H)if(this.F){if(this.B.has(t))return this.B.get(t)}else this.F=setTimeout(d,50,this);this.normalize&&(t="function"==typeof this.normalize?this.normalize(t):f?t.normalize("NFKD").replace(f,"").toLowerCase():t.toLowerCase()),this.prepare&&(t=this.prepare(t)),this.numeric&&t.length>3&&(t=t.replace(c,"$1 $2").replace(a,"$1 $2").replace(u,"$1 "));const n=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer);let i,s,o=[],l=r(),h=this.split||""===this.split?t.split(this.split):[t];for(let t,r,u=0;u<h.length;u++)if((t=r=h[u])&&!(t.length<this.minlength||t.length>this.maxlength)){if(e){if(l[t])continue;l[t]=1}else{if(i===t)continue;i=t}if(n)o.push(t);else if(!this.filter||("function"==typeof this.filter?this.filter(t):!this.filter.has(t))){if(this.cache&&t.length<=this.I)if(this.F){var p=this.D.get(t);if(p||""===p){p&&o.push(p);continue}}else this.F=setTimeout(d,50,this);if(this.stemmer){let e;for(this.K||(this.K=new RegExp("(?!^)("+this.A+")$"));e!==t&&t.length>2;)e=t,t=t.replace(this.K,t=>this.stemmer.get(t))}if(t&&(this.mapper||this.dedupe&&t.length>1)){p="";for(let e,n,i=0,r="";i<t.length;i++)e=t.charAt(i),e===r&&this.dedupe||((n=this.mapper&&this.mapper.get(e))||""===n?n===r&&this.dedupe||!(r=n)||(p+=n):p+=r=e);t=p}if(this.matcher&&t.length>1&&(this.J||(this.J=new RegExp("("+this.h+")","g")),t=t.replace(this.J,t=>this.matcher.get(t))),t&&this.replacer)for(p=0;t&&p<this.replacer.length;p+=2)t=t.replace(this.replacer[p],this.replacer[p+1]);if(this.cache&&r.length<=this.I&&(this.D.set(r,t),this.D.size>this.L&&(this.D.clear(),this.I=this.I/1.1|0)),t){if(t!==r)if(e){if(l[t])continue;l[t]=1}else{if(s===t)continue;s=t}o.push(t)}}}return this.finalize&&(o=this.finalize(o)||o),this.cache&&t.length<=this.H&&(this.B.set(t,o),this.B.size>this.L&&(this.B.clear(),this.H=this.H/1.1|0)),o},_.prototype.set=function(t,e){this.cache.set(this.h=t,e),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)},_.prototype.get=function(t){const e=this.cache.get(t);return e&&this.h!==t&&(this.cache.delete(t),this.cache.set(this.h=t,e)),e},_.prototype.remove=function(t){for(const e of this.cache){const n=e[0];e[1].includes(t)&&this.cache.delete(n)}},_.prototype.clear=function(){this.cache.clear(),this.h=""};const m={normalize:!1,numeric:!1,dedupe:!1},y={},w=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),v=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),b=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],x={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,ÃŸ:2,d:3,t:3,l:4,m:5,n:5,r:6};var k={Exact:m,Default:y,Normalize:y,LatinBalance:{mapper:w},LatinAdvanced:{mapper:w,matcher:v,replacer:b},LatinExtra:{mapper:w,replacer:b.concat([/(?!^)[aeo]/g,""]),matcher:v},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(t){for(let n=0;n<t.length;n++){var e=t[n];let i=e.charAt(0),r=x[i];for(let t,n=1;n<e.length&&(t=e.charAt(n),"h"===t||"w"===t||!(t=x[t])||t===r||(i+=t,r=t,4!==i.length));n++);t[n]=i}}},CJK:{split:""},LatinExact:m,LatinDefault:y,LatinSimple:y};function S(t,e,n,i){let r=[];for(let s,o=0;o<t.index.length;o++)if(s=t.index[o],e>=s.length)e-=s.length;else{const o=(e=s[i?"splice":"slice"](e,n)).length;if(o&&(r=r.length?r.concat(e):e,n-=o,i&&(t.length-=o),!n))break;e=0}return r}function C(t){if(!this||this.constructor!==C)return new C(t);this.index=t?[t]:[],this.length=t?t.length:0;const e=this;return new Proxy([],{get:(t,n)=>"length"===n?e.length:"push"===n?function(t){e.index[e.index.length-1].push(t),e.length++}:"pop"===n?function(){if(e.length)return e.length--,e.index[e.index.length-1].pop()}:"indexOf"===n?function(t){let n=0;for(let i,r,s=0;s<e.index.length;s++){if(i=e.index[s],r=i.indexOf(t),r>=0)return n+r;n+=i.length}return-1}:"includes"===n?function(t){for(let n=0;n<e.index.length;n++)if(e.index[n].includes(t))return!0;return!1}:"slice"===n?function(t,n){return S(e,t||0,n||e.length,!1)}:"splice"===n?function(t,n){return S(e,t||0,n||e.length,!0)}:"constructor"===n?Array:"symbol"!=typeof n?(t=e.index[n/2**31|0])&&t[n]:void 0,set:(t,n,i)=>(t=n/2**31|0,(e.index[t]||(e.index[t]=[]))[n]=i,e.length++,!0)})}function j(t=8){if(!this||this.constructor!==j)return new j(t);this.index=r(),this.h=[],this.size=0,t>32?(this.B=M,this.A=BigInt(t)):(this.B=P,this.A=t)}function A(t=8){if(!this||this.constructor!==A)return new A(t);this.index=r(),this.h=[],this.size=0,t>32?(this.B=M,this.A=BigInt(t)):(this.B=P,this.A=t)}function P(t){let e=2**this.A-1;if("number"==typeof t)return t&e;let n=0,i=this.A+1;for(let r=0;r<t.length;r++)n=(n*i^t.charCodeAt(r))&e;return 32===this.A?n+2**31:n}function M(t){let e=BigInt(2)**this.A-BigInt(1);var n=typeof t;if("bigint"===n)return t&e;if("number"===n)return BigInt(t)&e;n=BigInt(0);let i=this.A+BigInt(1);for(let r=0;r<t.length;r++)n=(n*i^BigInt(t.charCodeAt(r)))&e;return n}let O,z,B,L,R;async function D(t){var e=(t=t.data).task;const n=t.id;let i=t.args;if("init"===e)z=t.options||{},(e=t.factory)?(Function("return "+e)()(self),O=new self.FlexSearch.Index(z),delete self.FlexSearch):O=new Ct(z),postMessage({id:n});else{let r;"export"===e&&(i[1]?(i[0]=z.export,i[2]=0,i[3]=1):i=null),"import"===e?i[0]&&(t=await z.import.call(O,i[0]),O.import(i[0],t)):((r=i&&O[e].apply(O,i))&&r.then&&(r=await r),r&&r.await&&(r=await r.await),"search"===e&&r.result&&(r=r.result)),postMessage("search"===e?{id:n,msg:r}:{id:n})}}function N(t){E.call(t,"add"),E.call(t,"append"),E.call(t,"search"),E.call(t,"update"),E.call(t,"remove"),E.call(t,"searchCache")}function T(){B=R=0}function E(t){this[t+"Async"]=function(){const e=arguments;var n=e[e.length-1];let i;if("function"==typeof n&&(i=n,delete e[e.length-1]),B?R||(R=Date.now()-L>=this.priority*this.priority*3):(B=setTimeout(T,0),L=Date.now()),R){const n=this;return new Promise(i=>{setTimeout(function(){i(n[t+"Async"].apply(n,e))},0)})}const r=this[t].apply(this,e);return n=r.then?r:new Promise(t=>t(r)),i&&n.then(i),n}}C.prototype.clear=function(){this.index.length=0},C.prototype.push=function(){},j.prototype.get=function(t){const e=this.index[this.B(t)];return e&&e.get(t)},j.prototype.set=function(t,e){var n=this.B(t);let i=this.index[n];i?(n=i.size,i.set(t,e),(n-=i.size)&&this.size++):(this.index[n]=i=new Map([[t,e]]),this.h.push(i),this.size++)},A.prototype.add=function(t){var e=this.B(t);let n=this.index[e];n?(e=n.size,n.add(t),(e-=n.size)&&this.size++):(this.index[e]=n=new Set([t]),this.h.push(n),this.size++)},(t=j.prototype).has=A.prototype.has=function(t){const e=this.index[this.B(t)];return e&&e.has(t)},t.delete=A.prototype.delete=function(t){const e=this.index[this.B(t)];e&&e.delete(t)&&this.size--},t.clear=A.prototype.clear=function(){this.index=r(),this.h=[],this.size=0},t.values=A.prototype.values=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].values())yield e},t.keys=A.prototype.keys=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].keys())yield e},t.entries=A.prototype.entries=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].entries())yield e};let I=0;function F(t={},e){function i(n){function i(t){const e=(t=t.data||t).id,n=e&&l.h[e];n&&(n(t.msg),delete l.h[e])}if(this.worker=n,this.h=r(),this.worker)return o?this.worker.on("message",i):this.worker.onmessage=i,t.config?new Promise(function(e){I>1e9&&(I=0),l.h[++I]=function(){e(l)},l.worker.postMessage({id:I,task:"init",factory:s,options:t})}):(this.priority=t.priority||4,this.encoder=e||null,this.worker.postMessage({task:"init",factory:s,options:t}),this)}if(!this||this.constructor!==F)return new F(t);let s="undefined"!=typeof self?self._factory:"undefined"!=typeof window?window._factory:null;s&&(s=s.toString());const o="undefined"==typeof window,l=this,h=function(t,e,i){return e?new(n(809).Worker)("//worker/node.js"):t?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+D.toString()],{type:"text/javascript"}))):new window.Worker("string"==typeof i?i:"file:///Users/onigoetz/Sites/Libs/daux.io/node_modules/flexsearch/dist/flexsearch.bundle.module.min.js".replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js"),{type:"module"})}(s,o,t.worker);return h.then?h.then(function(t){return i.call(l,t)}):i.call(this,h)}function U(t){F.prototype[t]=function(){const e=this,n=[].slice.call(arguments);var i=n[n.length-1];let r;return"function"==typeof i&&(r=i,n.pop()),i=new Promise(function(i){"export"===t&&"function"==typeof n[0]&&(n[0]=null),I>1e9&&(I=0),e.h[++I]=i,e.worker.postMessage({task:t,id:I,args:n})}),r?(i.then(r),this):i}}function $(t,e,n,i,s,o){if(t=t[s],i===n.length-1)e[s]=o||t;else if(t)if(t.constructor===Array)for(e=e[s]=Array(t.length),s=0;s<t.length;s++)$(t,e,n,i,s);else e=e[s]||(e[s]=r()),s=n[++i],$(t,e,n,i,s)}function q(t,e,n,i,r,s,o,l){if(t=t[o])if(i===e.length-1){if(t.constructor===Array){if(n[i]){for(e=0;e<t.length;e++)r.add(s,t[e],!0,!0);return}t=t.join(" ")}r.add(s,t,l,!0)}else if(t.constructor===Array)for(o=0;o<t.length;o++)q(t,e,n,i,r,s,o,l);else o=e[++i],q(t,e,n,i,r,s,o,l)}function H(t,e,n,i){if(!t.length)return t;if(1===t.length)return t=t[0],t=n||t.length>e?t.slice(n,n+e):t,i?st.call(this,t):t;let r=[];for(let s,o,l=0;l<t.length;l++)if((s=t[l])&&(o=s.length)){if(n){if(n>=o){n-=o;continue}s=s.slice(n,n+e),o=s.length,n=0}if(o>e&&(s=s.slice(0,e),o=e),!r.length&&o>=e)return i?st.call(this,s):s;if(r.push(s),!(e-=o))break}return r=r.length>1?[].concat.apply([],r):r[0],i?st.call(this,r):r}function W(t,e,n,i){var r=i[0];if(r[0]&&r[0].query)return t[e].apply(t,r);if(!("and"!==e&&"not"!==e||t.result.length||t.await||r.suggest))return i.length>1&&(r=i[i.length-1]),(i=r.resolve)?t.await||t.result:t;let s,o,l,h,u,c=[],a=0,f=0;for(e=0;e<i.length;e++)if(r=i[e]){var p=void 0;if(r.constructor===X)p=r.await||r.result;else if(r.then||r.constructor===Array)p=r;else{a=r.limit||0,f=r.offset||0,l=r.suggest,o=r.resolve,s=((h=r.highlight||t.highlight)||r.enrich)&&o,p=r.queue;let n=r.async||p,i=r.index,d=r.query;if(i?t.index||(t.index=i):i=t.index,d||r.tag){const s=r.field||r.pluck;if(s&&(!d||t.query&&!h||(t.query=d,t.field=s,t.highlight=h),i=i.index.get(s)),p&&(u||t.await)){let s;u=1;const o=t.C.length,l=new Promise(function(t){s=t});(function(e,i){l.h=function(){i.index=null,i.resolve=!1;let r=n?e.searchAsync(i):e.search(i);return r.then?r.then(function(e){return t.C[o]=e=e.result||e,s(e),e}):(r=r.result||r,s(r),r)}})(i,Object.assign({},r)),t.C.push(l),c[e]=l;continue}r.resolve=!1,r.index=null,p=n?i.searchAsync(r):i.search(r),r.resolve=o,r.index=i}else if(r.and)p=J(r,"and",i);else if(r.or)p=J(r,"or",i);else if(r.not)p=J(r,"not",i);else{if(!r.xor)continue;p=J(r,"xor",i)}}p.await?(u=1,p=p.await):p.then?(u=1,p=p.then(function(t){return t.result||t})):p=p.result||p,c[e]=p}if(u&&!t.await&&(t.await=new Promise(function(e){t.return=e})),u){const e=Promise.all(c).then(function(i){for(let r=0;r<t.C.length;r++)if(t.C[r]===e){t.C[r]=function(){return n.call(t,i,a,f,s,o,l,h)};break}Y(t)});t.C.push(e)}else{if(!t.await)return n.call(t,c,a,f,s,o,l,h);t.C.push(function(){return n.call(t,c,a,f,s,o,l,h)})}return o?t.await||t.result:t}function J(t,e,n){const i=(t=t[e])[0]||t;return i.index||(i.index=n),n=new X(i),t.length>1&&(n=n[e].apply(n,t.slice(1))),n}function K(t,e,n,i,r,s,o){return t.length&&(this.result.length&&t.push(this.result),t.length<2?this.result=t[0]:(this.result=et(t,e,n,!1,this.h),n=0)),r&&(this.await=null),r?this.resolve(e,n,i,o):this}function G(t,e,n,i,r,s,o){if(!s&&!this.result.length)return r?this.result:this;let l;if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{let i=0;for(let e,n,r=0;r<t.length;r++)if((e=t[r])&&(n=e.length))i<n&&(i=n);else if(!s){i=0;break}i?(this.result=tt(t,i,e,n,s,this.h,r),l=!0):this.result=[]}else s||(this.result=t);return r&&(this.await=null),r?this.resolve(e,n,i,o,l):this}function V(t,e,n,i,s,o,l){if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{t:{o=n;var h=this.h;const i=[],l=r();let u=0;for(let e,n=0;n<t.length;n++)if(e=t[n]){u<e.length&&(u=e.length);for(let t,n=0;n<e.length;n++)if(t=e[n])for(let e,n=0;n<t.length;n++)e=t[n],l[e]=l[e]?2:1}for(let n,r=0,c=0;r<u;r++)for(let u,a=0;a<t.length;a++)if((u=t[a])&&(n=u[r]))for(let u,f=0;f<n.length;f++)if(u=n[f],1===l[u])if(o)o--;else if(s){if(i.push(u),i.length===e){t=i;break t}}else{const n=r+(a?h:0);if(i[n]||(i[n]=[]),i[n].push(u),++c===e){t=i;break t}}t=i}this.result=t,h=!0}else o||(this.result=t);return s&&(this.await=null),s?this.resolve(e,n,i,l,h):this}function Z(t,e,n,i,r,s,o){if(!s&&!this.result.length)return r?this.result:this;if(t.length&&this.result.length){t:{s=n;var l=[];t=new Set(t.flat().flat());for(let n,i=0,o=0;i<this.result.length;i++)if(n=this.result[i])for(let h,u=0;u<n.length;u++)if(h=n[u],!t.has(h))if(s)s--;else if(r){if(l.push(h),l.length===e){t=l;break t}}else if(l[i]||(l[i]=[]),l[i].push(h),++o===e){t=l;break t}t=l}this.result=t,l=!0}return r&&(this.await=null),r?this.resolve(e,n,i,o,l):this}function Q(t,e,n,i,r){let s,o,h;"string"==typeof r?(s=r,r=""):s=r.template,o=s.indexOf("$1"),h=s.substring(o+2),o=s.substring(0,o);let u=r&&r.boundary,c=!r||!1!==r.clip,a=r&&r.merge&&h&&o&&new RegExp(h+" "+o,"g");var f=0;if("object"==typeof(r=r&&r.ellipsis)){var p=r.template;f=p.length-2,r=r.pattern}let d,g;"string"!=typeof r&&(r=!1===r?"":"..."),f&&(r=p.replace("$1",r)),p=r.length-f,"object"==typeof u&&(d=u.before,0===d&&(d=-1),g=u.after,0===g&&(g=-1),u=u.total||9e5),f=new Map;for(let R,D,N,T=0;T<e.length;T++){let E;if(i)E=e,N=i;else{var _=e[T];if(N=_.field,!N)continue;E=_.result}D=n.get(N),R=D.encoder,"string"!=typeof(_=f.get(R))&&(_=R.encode(t),f.set(R,_));for(let t=0;t<E.length;t++){var m=E[t].doc;if(!m)continue;if(!(m=l(m,N)))continue;var y=m.trim().split(/\s+/);if(!y.length)continue;m="";var w=[];let e=[];for(var v=-1,b=-1,x=0,k=0;k<y.length;k++){var S=y[k],C=R.encode(S);let t;if((C=C.length>1?C.join(" "):C[0])&&S){for(var j=S.length,A=(R.split?S.replace(R.split,""):S).length-C.length,P="",M=0,O=0;O<_.length;O++){var z=_[O];if(z){var B=z.length;B+=A,M&&B<=M||(z=C.indexOf(z))>-1&&(P=(z?S.substring(0,z):"")+o+S.substring(z,z+B)+h+(z+B<j?S.substring(z+B):""),M=B,t=!0)}}P&&(u&&(v<0&&(v=m.length+(m?1:0)),b=m.length+(m?1:0)+P.length,x+=j,e.push(w.length),w.push({match:P})),m+=(m?" ":"")+P)}if(t){if(u&&x>=u)break}else m+=(m?" ":"")+(S=y[k]),u&&w.push({text:S})}if(x=e.length*(s.length-2),d||g||u&&m.length-x>u)if(k=b-v,d>0&&(k+=d),g>0&&(k+=g),k<=(x=u+x-2*p))y=d?v-(d>0?d:0):v-((x-k)/2|0),w=g?b+(g>0?g:0):y+x,c||(y>0&&" "!==m.charAt(y)&&" "!==m.charAt(y-1)&&(y=m.indexOf(" ",y))<0&&(y=0),w<m.length&&" "!==m.charAt(w-1)&&" "!==m.charAt(w)&&((w=m.lastIndexOf(" ",w))<b?w=b:++w)),m=(y?r:"")+m.substring(y,w)+(w<m.length?r:"");else{for(b=[],v={},x={},k={},S={},C={},P=A=j=0,O=M=1;;){var L=void 0;for(let t,n=0;n<e.length;n++){if(t=e[n],P)if(A!==P){if(k[n+1])continue;if(t+=P,v[t]){j-=p,x[n+1]=1,k[n+1]=1;continue}if(t>=w.length-1){if(t>=w.length){k[n+1]=1,t>=y.length&&(x[n+1]=1);continue}j-=p}if(m=w[t].text,B=g&&C[n]){if(!(B>0)){k[n+1]=1;continue}if(m.length>B){if(k[n+1]=1,!c)continue;m=m.substring(0,B)}(B-=m.length)||(B=-1),C[n]=B}if(j+m.length+1<=u)m=" "+m,b[n]+=m;else{if(!c){k[n+1]=1;continue}(L=u-j-1)>0&&(m=" "+m.substring(0,L),b[n]+=m),k[n+1]=1}}else{if(k[n])continue;if(t-=A,v[t]){j-=p,k[n]=1,x[n]=1;continue}if(t<=0){if(t<0){k[n]=1,x[n]=1;continue}j-=p}if(m=w[t].text,B=d&&S[n]){if(!(B>0)){k[n]=1;continue}if(m.length>B){if(k[n]=1,!c)continue;m=m.substring(m.length-B)}(B-=m.length)||(B=-1),S[n]=B}if(j+m.length+1<=u)m+=" ",b[n]=m+b[n];else{if(!c){k[n]=1;continue}(L=m.length+1-(u-j))>=0&&L<m.length&&(m=m.substring(L)+" ",b[n]=m+b[n]),k[n]=1}}else{let e;if(m=w[t].match,d&&(S[n]=d),g&&(C[n]=g),n&&j++,t?!n&&p&&(j+=p):(x[n]=1,k[n]=1),t>=y.length-1||t<w.length-1&&w[t+1].match?e=1:p&&(j+=p),j-=s.length-2,n&&!(j+m.length<=u)){L=M=O=x[n]=0;break}b[n]=m,e&&(x[n+1]=1,k[n+1]=1)}j+=m.length,L=v[t]=1}if(L)A===P?P++:A++;else{if(A===P?M=0:O=0,!M&&!O)break;M?P=++A:P++}}m="";for(let t,e=0;e<b.length;e++)t=(e&&x[e]?" ":(e&&!r?" ":"")+r)+b[e],m+=t;r&&!x[b.length]&&(m+=r)}a&&(m=m.replace(a," ")),E[t].highlight=m}if(i)break}return e}function X(t,e){if(!this||this.constructor!==X)return new X(t,e);let n,i,r,s,o,l,h=0;if(t&&t.index){const n=t;if(e=n.index,h=n.boost||0,i=n.query){r=n.field||n.pluck,s=n.highlight;const i=n.resolve;t=n.async||n.queue,n.resolve=!1,n.index=null,t=t?e.searchAsync(n):e.search(n),n.resolve=i,n.index=e,t=t.result||t}else t=[]}if(t&&t.then){const e=this;t=t.then(function(t){e.C[0]=e.result=t.result||t,Y(e)}),n=[t],t=[],o=new Promise(function(t){l=t})}this.index=e||null,this.result=t||[],this.h=h,this.C=n||[],this.await=o||null,this.return=l||null,this.highlight=s||null,this.query=i||"",this.field=r||""}function Y(t,e){let n=t.result;var i=t.await;t.await=null;for(let e,r=0;r<t.C.length;r++)if(e=t.C[r])if("function"==typeof e)n=e(),t.C[r]=n=n.result||n,r--;else if(e.h)n=e.h(),t.C[r]=n=n.result||n,r--;else if(e.then)return t.await=i;return i=t.return,t.C=[],t.return=null,e||i(n),n}function tt(t,e,n,i,s,o,l){const h=t.length;let u,c,a=[];u=r();for(let r,f,p,d,g=0;g<e;g++)for(let e=0;e<h;e++)if(p=t[e],g<p.length&&(r=p[g]))for(let t=0;t<r.length;t++){if(f=r[t],(c=u[f])?u[f]++:(c=0,u[f]=1),d=a[c]||(a[c]=[]),!l){let t=g+(e||!s?0:o||0);d=d[t]||(d[t]=[])}if(d.push(f),l&&n&&c===h-1&&d.length-i===n)return i?d.slice(i):d}if(t=a.length)if(s)a=a.length>1?et(a,n,i,l,o):(a=a[0])&&n&&a.length>n||i?a.slice(i,n+i):a;else{if(t<h)return[];if(a=a[t-1],n||i)if(l)(a.length>n||i)&&(a=a.slice(i,n+i));else{s=[];for(let t,e=0;e<a.length;e++)if(t=a[e])if(i&&t.length>i)i-=t.length;else if((n&&t.length>n||i)&&(t=t.slice(i,n+i),n-=t.length,i&&(i-=t.length)),s.push(t),!n)break;a=s}}return a}function et(t,e,n,i,s){const o=[],l=r();let h;var u=t.length;let c;if(i){for(s=u-1;s>=0;s--)if(c=(i=t[s])&&i.length)for(u=0;u<c;u++)if(h=i[u],!l[h])if(l[h]=1,n)n--;else if(o.push(h),o.length===e)return o}else for(let r,a=u-1,f=0;a>=0;a--){r=t[a];for(let t=0;t<r.length;t++)if(c=(i=r[t])&&i.length)for(let r=0;r<c;r++)if(h=i[r],!l[h])if(l[h]=1,n)n--;else{let n=(t+(a<u-1&&s||0))/(a+1)|0;if((o[n]||(o[n]=[])).push(h),++f===e)return o}}return o}function nt(t,e,n){const i=r(),s=[];for(let t,n=0;n<e.length;n++){t=e[n];for(let e=0;e<t.length;e++)i[t[e]]=1}if(n)for(let e,n=0;n<t.length;n++)e=t[n],i[e]&&(s.push(e),i[e]=0);else for(let n,r,o=0;o<t.result.length;o++)for(n=t.result[o],e=0;e<n.length;e++)r=n[e],i[r]&&((s[o]||(s[o]=[])).push(r),i[r]=0);return s}function it(t){const e=[],n=r(),i=r();for(let r,s,o,l,h,u,c,a=0;a<t.length;a++){r=t[a],s=r.field,o=r.result;for(let t=0;t<o.length;t++)h=o[t],"object"!=typeof h?h={id:l=h}:l=h.id,(u=n[l])?u.push(s):(h.field=n[l]=[s],e.push(h)),(c=h.highlight)&&(u=i[l],u||(i[l]=u={},h.highlight=u),u[s]=c)}return e}function rt(t,e,n,i,r){return(t=this.tag.get(t))&&(t=t.get(e))?((e=t.length-i)>0&&((n&&e>n||i)&&(t=t.slice(i,i+n)),r&&(t=st.call(this,t))),t):[]}function st(t){if(!this||!this.store)return t;if(this.db)return this.index.get(this.field[0]).db.enrich(t);const e=Array(t.length);for(let n,i=0;i<t.length;i++)n=t[i],e[i]={id:n,doc:this.store.get(n)};return e}function ot(t){if(!this||this.constructor!==ot)return new ot(t);const e=t.document||t.doc||t;let n,i;if(this.B=[],this.field=[],this.D=[],this.key=(n=e.key||e.id)&&ht(n,this.D)||"id",(i=t.keystore||0)&&(this.keystore=i),this.fastupdate=!!t.fastupdate,this.reg=!this.fastupdate||t.worker||t.db?i?new A(i):new Set:i?new j(i):new Map,this.h=(n=e.store||null)&&n&&!0!==n&&[],this.store=n?i?new j(i):new Map:null,this.cache=(n=t.cache||null)&&new _(n),t.cache=!1,this.worker=t.worker||!1,this.priority=t.priority||4,this.index=lt.call(this,t,e),this.tag=null,(n=e.tag)&&("string"==typeof n&&(n=[n]),n.length)){this.tag=new Map,this.A=[],this.F=[];for(let t,e,i=0;i<n.length;i++){if(t=n[i],e=t.field||t,!e)throw Error("The tag field from the document descriptor is undefined.");t.custom?this.A[i]=t.custom:(this.A[i]=ht(e,this.D),t.filter&&("string"==typeof this.A[i]&&(this.A[i]=new String(this.A[i])),this.A[i].G=t.filter)),this.F[i]=e,this.tag.set(e,new Map)}}if(this.worker){this.fastupdate=!1,t=[];for(const e of this.index.values())e.then&&t.push(e);if(t.length){const e=this;return Promise.all(t).then(function(t){let n=0;for(const i of e.index.entries()){const r=i[0];let s=i[1];s.then&&(s=t[n],e.index.set(r,s),n++)}return e})}}else t.db&&(this.fastupdate=!1,this.mount(t.db))}function lt(t,e){const n=new Map;let i=e.index||e.field||e;s(i)&&(i=[i]);for(let e,l,h=0;h<i.length;h++){if(e=i[h],s(e)||(l=e,e=e.field),l=o(l)?Object.assign({},t,l):t,this.worker){var r=void 0;r=new F(l,r=(r=l.encoder)&&r.encode?r:new p("string"==typeof r?k[r]:r||{})),n.set(e,r)}this.worker||n.set(e,new Ct(l,this.reg)),l.custom?this.B[h]=l.custom:(this.B[h]=ht(e,this.D),l.filter&&("string"==typeof this.B[h]&&(this.B[h]=new String(this.B[h])),this.B[h].G=l.filter)),this.field[h]=e}if(this.h){s(t=e.store)&&(t=[t]);for(let e,n,i=0;i<t.length;i++)e=t[i],n=e.field||e,e.custom?(this.h[i]=e.custom,e.custom.O=n):(this.h[i]=ht(n,this.D),e.filter&&("string"==typeof this.h[i]&&(this.h[i]=new String(this.h[i])),this.h[i].G=e.filter))}return n}function ht(t,e){const n=t.split(":");let i=0;for(let r=0;r<n.length;r++)"]"===(t=n[r])[t.length-1]&&(t=t.substring(0,t.length-2))&&(e[i]=!0),t&&(n[i++]=t);return i<n.length&&(n.length=i),i>1?n:n[0]}function ut(t,e=0){let n=[],i=[];e&&(e=25e4/e*5e3|0);for(const r of t.entries())i.push(r),i.length===e&&(n.push(i),i=[]);return i.length&&n.push(i),n}function ct(t,e){e||(e=new Map);for(let n,i=0;i<t.length;i++)n=t[i],e.set(n[0],n[1]);return e}function at(t,e=0){let n=[],i=[];e&&(e=25e4/e*1e3|0);for(const r of t.entries())i.push([r[0],ut(r[1])[0]]),i.length===e&&(n.push(i),i=[]);return i.length&&n.push(i),n}function ft(t,e){e||(e=new Map);for(let n,i,r=0;r<t.length;r++)n=t[r],i=e.get(n[0]),e.set(n[0],ct(n[1],i));return e}function pt(t){let e=[],n=[];for(const i of t.keys())n.push(i),25e4===n.length&&(e.push(n),n=[]);return n.length&&e.push(n),e}function dt(t,e){e||(e=new Set);for(let n=0;n<t.length;n++)e.add(t[n]);return e}function gt(t,e,n,i,r,s,o=0){const l=i&&i.constructor===Array;var h=l?i.shift():i;if(!h)return this.export(t,e,r,s+1);if((h=t((e?e+".":"")+(o+1)+"."+n,JSON.stringify(h)))&&h.then){const u=this;return h.then(function(){return gt.call(u,t,e,n,l?i:null,r,s,o+1)})}return gt.call(this,t,e,n,l?i:null,r,s,o+1)}function _t(t,e){let n="";for(const i of t.entries()){t=i[0];const r=i[1];let s="";for(let t,n=0;n<r.length;n++){t=r[n]||[""];let i="";for(let n=0;n<t.length;n++)i+=(i?",":"")+("string"===e?'"'+t[n]+'"':t[n]);i="["+i+"]",s+=(s?",":"")+i}s='["'+t+'",['+s+"]]",n+=(n?",":"")+s}return n}function mt(t,e){let n=0;var i=void 0===e;if(t.constructor===Array){for(let r,s,o,l=0;l<t.length;l++)if((r=t[l])&&r.length){if(i)return 1;if(s=r.indexOf(e),s>=0){if(r.length>1)return r.splice(s,1),1;if(delete t[l],n)return 1;o=1}else{if(o)return 1;n++}}}else for(let r of t.entries())i=r[0],mt(r[1],e)?n++:t.delete(i);return n}U("add"),U("append"),U("search"),U("update"),U("remove"),U("clear"),U("export"),U("import"),F.prototype.searchCache=g,N(F.prototype),ot.prototype.add=function(t,e,n){if(o(t)&&(t=l(e=t,this.key)),e&&(t||0===t)){if(!n&&this.reg.has(t))return this.update(t,e);for(let r,o=0;o<this.field.length;o++){r=this.B[o];var i=this.index.get(this.field[o]);if("function"==typeof r){var h=r(e);h&&i.add(t,h,n,!0)}else(!(h=r.G)||h(e))&&(r.constructor===String?r=[""+r]:s(r)&&(r=[r]),q(e,r,this.D,0,i,t,r[0],n))}if(this.tag)for(i=0;i<this.A.length;i++){var u=this.A[i];h=this.tag.get(this.F[i]);let o=r();if("function"==typeof u){if(!(u=u(e)))continue}else{var c=u.G;if(c&&!c(e))continue;u.constructor===String&&(u=""+u),u=l(e,u)}if(h&&u){s(u)&&(u=[u]);for(let e,i,r=0;r<u.length;r++)if(e=u[r],!o[e]&&(o[e]=1,(c=h.get(e))?i=c:h.set(e,i=[]),!n||!i.includes(t))){if(i.length===2**31-1){if(c=new C(i),this.fastupdate)for(let t of this.reg.values())t.includes(i)&&(t[t.indexOf(i)]=c);h.set(e,i=c)}i.push(t),this.fastupdate&&((c=this.reg.get(t))?c.push(i):this.reg.set(t,[i]))}}}if(this.store&&(!n||!this.store.has(t))){let i;if(this.h){i=r();for(let t,r=0;r<this.h.length;r++){if(t=this.h[r],(n=t.G)&&!n(e))continue;let o;if("function"==typeof t){if(o=t(e),!o)continue;t=[t.O]}else if(s(t)||t.constructor===String){i[t]=e[t];continue}$(e,i,t,0,t[0],o)}}this.store.set(t,i||e)}this.worker&&(this.fastupdate||this.reg.add(t))}return this},X.prototype.or=function(){return W(this,"or",K,arguments)},X.prototype.and=function(){return W(this,"and",G,arguments)},X.prototype.xor=function(){return W(this,"xor",V,arguments)},X.prototype.not=function(){return W(this,"not",Z,arguments)},(t=X.prototype).limit=function(t){if(this.await){const e=this;this.C.push(function(){return e.limit(t).result})}else if(this.result.length){const e=[];for(let n,i=0;i<this.result.length;i++)if(n=this.result[i]){if(!(n.length<=t)){e[i]=n.slice(0,t);break}if(e[i]=n,!(t-=n.length))break}this.result=e}return this},t.offset=function(t){if(this.await){const e=this;this.C.push(function(){return e.offset(t).result})}else if(this.result.length){const e=[];for(let n,i=0;i<this.result.length;i++)(n=this.result[i])&&(n.length<=t?t-=n.length:(e[i]=n.slice(t),t=0));this.result=e}return this},t.boost=function(t){if(this.await){const e=this;this.C.push(function(){return e.boost(t).result})}else this.h+=t;return this},t.resolve=function(t,e,n,i,r){let s=this.await?Y(this,!0):this.result;if(s.then){const o=this;return s.then(function(){return o.resolve(t,e,n,i,r)})}return s.length&&("object"==typeof t?(i=t.highlight||this.highlight,n=!!i||t.enrich,e=t.offset,t=t.limit):(i=i||this.highlight,n=!!i||n),s=r?n?st.call(this.index,s):s:H.call(this.index,s,t||100,e,n)),this.finalize(s,i)},t.finalize=function(t,e){if(t.then){const n=this;return t.then(function(t){return n.finalize(t,e)})}e&&t.length&&this.query&&(t=Q(this.query,t,this.index.index,this.field,e));const n=this.return;return this.highlight=this.index=this.result=this.C=this.await=this.return=null,this.query=this.field="",n&&n(t),t},r(),ot.prototype.search=function(t,e,n,r){n||(!e&&o(t)?(n=t,t=""):o(e)&&(n=e,e=0));let l=[];var h=[];let u,c,a,f,p,d,g,_,m=0,y=!0;if(n){n.constructor===Array&&(n={index:n}),t=n.query||t,u=n.pluck,c=n.merge,f=n.boost,d=u||n.field||(d=n.index)&&(d.index?null:d);var w=this.tag&&n.tag;a=n.suggest,y=!1!==n.resolve,p=n.cache,g=y&&this.store&&n.highlight;var v=!!g||y&&this.store&&n.enrich;e=n.limit||e;var b=n.offset||0;if(e||(e=y?100:0),w&&(!this.db||!r)){w.constructor!==Array&&(w=[w]);var x=[];for(let t,e=0;e<w.length;e++)if(t=w[e],t.field&&t.tag){var k=t.tag;if(k.constructor===Array)for(var S=0;S<k.length;S++)x.push(t.field,k[S]);else x.push(t.field,k)}else{k=Object.keys(t);for(let e,n,i=0;i<k.length;i++)if(e=k[i],n=t[e],n.constructor===Array)for(S=0;S<n.length;S++)x.push(e,n[S]);else x.push(e,n)}if(w=x,!t){if(h=[],x.length)for(w=0;w<x.length;w+=2){if(this.db){if(!(r=this.index.get(x[w])))continue;h.push(r=r.db.tag(x[w+1],e,b,v))}else r=rt.call(this,x[w],x[w+1],e,b,v);l.push(y?{field:x[w],tag:x[w+1],result:r}:[r])}if(h.length){const t=this;return Promise.all(h).then(function(e){for(let t=0;t<e.length;t++)y?l[t].result=e[t]:l[t]=e[t];return y?l:new X(l.length>1?tt(l,1,0,0,a,f):l[0],t)})}return y?l:new X(l.length>1?tt(l,1,0,0,a,f):l[0],this)}}y||u||!(d=d||this.field)||(s(d)?u=d:(d.constructor===Array&&1===d.length&&(d=d[0]),u=d.field||d.index)),d&&d.constructor!==Array&&(d=[d])}d||(d=this.field),x=(this.worker||this.db)&&!r&&[];for(let o,u,c,f=0;f<d.length;f++){if(u=d[f],this.db&&this.tag&&!this.B[f])continue;let j;if(s(u)||(j=u,u=j.field,t=j.query||t,e=i(j.limit,e),b=i(j.offset,b),a=i(j.suggest,a),g=y&&this.store&&i(j.highlight,g),v=!!g||y&&this.store&&i(j.enrich,v),p=i(j.cache,p)),r)o=r[f];else{S=(k=j||n||{}).enrich;var C=this.index.get(u);if(w&&(this.db&&(k.tag=w,_=C.db.support_tag_search,k.field=d),!_&&S&&(k.enrich=!1)),o=p?C.searchCache(t,e,k):C.search(t,e,k),S&&(k.enrich=S),x){x[f]=o;continue}}if(c=(o=o.result||o)&&o.length,w&&c){if(k=[],S=0,this.db&&r){if(!_)for(C=d.length;C<r.length;C++){let t=r[C];if(t&&t.length)S++,k.push(t);else if(!a)return y?l:new X(l,this)}}else for(let t,e,n=0;n<w.length;n+=2){if(t=this.tag.get(w[n]),!t){if(a)continue;return y?l:new X(l,this)}if(e=(t=t&&t.get(w[n+1]))&&t.length)S++,k.push(t);else if(!a)return y?l:new X(l,this)}if(S){if(o=nt(o,k,y),c=o.length,!c&&!a)return y?o:new X(o,this);S--}}if(c)h[m]=u,l.push(o),m++;else if(1===d.length)return y?l:new X(l,this)}if(x){if(this.db&&w&&w.length&&!_)for(v=0;v<w.length;v+=2){if(!(h=this.index.get(w[v]))){if(a)continue;return y?l:new X(l,this)}x.push(h.db.tag(w[v+1],e,b,!1))}const i=this;return Promise.all(x).then(function(r){return n&&(n.resolve=y),r.length&&(r=i.search(t,e,n,r)),r})}if(!m)return y?l:new X(l,this);if(u&&(!v||!this.store))return l=l[0],y?l:new X(l,this);for(x=[],b=0;b<h.length;b++){if(w=l[b],v&&w.length&&void 0===w[0].doc&&(this.db?x.push(w=this.index.get(this.field[0]).db.enrich(w)):w=st.call(this,w)),u)return y?g?Q(t,w,this.index,u,g):w:new X(w,this);l[b]={field:h[b],result:w}}if(v&&this.db&&x.length){const e=this;return Promise.all(x).then(function(n){for(let t=0;t<n.length;t++)l[t].result=n[t];return g&&(l=Q(t,l,e.index,u,g)),c?it(l):l})}return g&&(l=Q(t,l,this.index,u,g)),c?it(l):l},(t=ot.prototype).mount=function(t){let e=this.field;if(this.tag)for(let t,i=0;i<this.F.length;i++){t=this.F[i];var n=void 0;this.index.set(t,n=new Ct({},this.reg)),e===this.field&&(e=e.slice(0)),e.push(t),n.tag=this.tag.get(t)}n=[];const i={db:t.db,type:t.type,fastupdate:t.fastupdate};for(let r,s,o=0;o<e.length;o++){i.field=s=e[o],r=this.index.get(s);const l=new t.constructor(t.id,i);l.id=t.id,n[o]=l.mount(r),r.document=!0,o?r.bypass=!0:r.store=this.store}const r=this;return this.db=Promise.all(n).then(function(){r.db=!0})},t.commit=async function(){const t=[];for(const e of this.index.values())t.push(e.commit());await Promise.all(t),this.reg.clear()},t.destroy=function(){const t=[];for(const e of this.index.values())t.push(e.destroy());return Promise.all(t)},t.append=function(t,e){return this.add(t,e,!0)},t.update=function(t,e){return this.remove(t).add(t,e)},t.remove=function(t){for(var e of(o(t)&&(t=l(t,this.key)),this.index.values()))e.remove(t,!0);if(this.reg.has(t)){if(this.tag&&!this.fastupdate)for(let n of this.tag.values())for(let i of n){e=i[0];const r=i[1],s=r.indexOf(t);s>-1&&(r.length>1?r.splice(s,1):n.delete(e))}this.store&&this.store.delete(t),this.reg.delete(t)}return this.cache&&this.cache.remove(t),this},t.clear=function(){const t=[];for(const e of this.index.values()){const n=e.clear();n.then&&t.push(n)}if(this.tag)for(const t of this.tag.values())t.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),t.length?Promise.all(t):this},t.contain=function(t){return this.db?this.index.get(this.field[0]).db.has(t):this.reg.has(t)},t.cleanup=function(){for(const t of this.index.values())t.cleanup();return this},t.get=function(t){return this.db?this.index.get(this.field[0]).db.enrich(t).then(function(t){return t[0]&&t[0].doc||null}):this.store.get(t)||null},t.set=function(t,e){return"object"==typeof t&&(t=l(e=t,this.key)),this.store.set(t,e),this},t.searchCache=g,t.export=function(t,e,n=0,i=0){if(n<this.field.length){const r=this.field[n];if((e=this.index.get(r).export(t,r,n,i=1))&&e.then){const i=this;return e.then(function(){return i.export(t,r,n+1)})}return this.export(t,r,n+1)}let r,s;switch(i){case 0:r="reg",s=pt(this.reg),e=null;break;case 1:r="tag",s=this.tag&&at(this.tag,this.reg.size),e=null;break;case 2:r="doc",s=this.store&&ut(this.store),e=null;break;default:return}return gt.call(this,t,e,r,s||null,n,i)},t.import=function(t,e){var n=t.split(".");"json"===n[n.length-1]&&n.pop();const i=n.length>2?n[0]:"";if(n=n.length>2?n[2]:n[1],this.worker&&i)return this.index.get(i).import(t);if(e){if("string"==typeof e&&(e=JSON.parse(e)),i)return this.index.get(i).import(n,e);switch(n){case"reg":this.fastupdate=!1,this.reg=dt(e,this.reg);for(let t,e=0;e<this.field.length;e++)t=this.index.get(this.field[e]),t.fastupdate=!1,t.reg=this.reg;if(this.worker){e=[];for(const n of this.index.values())e.push(n.import(t));return Promise.all(e)}break;case"tag":this.tag=ft(e,this.tag);break;case"doc":this.store=ct(e,this.store)}}},N(ot.prototype),Ct.prototype.remove=function(t,e){const n=this.reg.size&&(this.fastupdate?this.reg.get(t):this.reg.has(t));if(n){if(this.fastupdate){for(let e,i,r=0;r<n.length;r++)if((e=n[r])&&(i=e.length))if(e[i-1]===t)e.pop();else{const n=e.indexOf(t);n>=0&&e.splice(n,1)}}else mt(this.map,t),this.depth&&mt(this.ctx,t);e||this.reg.delete(t)}return this.db&&(this.commit_task.push({del:t}),this.M&&jt(this)),this.cache&&this.cache.remove(t),this};const yt={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};function wt(t,e,n,i,s,o,l){let h,u;if(!(h=e[n])||l&&!h[l]){if(l?((e=h||(e[n]=r()))[l]=1,u=t.ctx,(h=u.get(l))?u=h:u.set(l,u=t.keystore?new j(t.keystore):new Map)):(u=t.map,e[n]=1),(h=u.get(n))?u=h:u.set(n,u=h=[]),o)for(let n,r=0;r<h.length;r++)if((n=h[r])&&n.includes(s)){if(r<=i)return;n.splice(n.indexOf(s),1),t.fastupdate&&(e=t.reg.get(s))&&e.splice(e.indexOf(n),1);break}if(u=u[i]||(u[i]=[]),u.push(s),u.length===2**31-1){if(e=new C(u),t.fastupdate)for(let n of t.reg.values())n.includes(u)&&(n[n.indexOf(u)]=e);h[i]=u=e}t.fastupdate&&((i=t.reg.get(s))?i.push(u):t.reg.set(s,[u]))}}function vt(t,e,n,i,r){return n&&t>1?e+(i||0)<=t?n+(r||0):(t-1)/(e+(i||0))*(n+(r||0))+1|0:0}function bt(t,e,n,i,r,s,o){let l=t.length,h=t;if(l>1)h=tt(t,e,n,i,r,s,o);else if(1===l)return o?H.call(null,t[0],n,i):new X(t[0],this);return o?h:new X(h,this)}function xt(t,e,n,i,r,s,o){return t=St(this,t,e,n,i,r,s,o),this.db?t.then(function(t){return r?t||[]:new X(t,this)}):t&&t.length?r?H.call(this,t,n,i):new X(t,this):r?[]:new X([],this)}function kt(t,e,n,i){let r=[];if(t&&t.length){if(t.length<=i)return void e.push(t);for(let e,n=0;n<i;n++)(e=t[n])&&(r[n]=e);if(r.length)return void e.push(r)}if(!n)return r}function St(t,e,n,i,r,s,o,l){let h;return n&&(h=t.bidirectional&&e>n)&&(h=n,n=e,e=h),t.db?t.db.get(e,n,i,r,s,o,l):t=n?(t=t.ctx.get(n))&&t.get(e):t.map.get(e)}function Ct(t,e){if(!this||this.constructor!==Ct)return new Ct(t);if(t){var n=s(t)?t:t.preset;n&&(t=Object.assign({},yt[n],t))}else t={};const i=!0===(n=t.context)?{depth:1}:n||{},r=s(t.encoder)?k[t.encoder]:t.encode||t.encoder||{};this.encoder=r.encode?r:"object"==typeof r?new p(r):{encode:r},this.resolution=t.resolution||9,this.tokenize=n=(n=t.tokenize)&&"default"!==n&&"exact"!==n&&n||"strict",this.depth="strict"===n&&i.depth||0,this.bidirectional=!1!==i.bidirectional,this.fastupdate=!!t.fastupdate,this.score=t.score||null,(n=t.keystore||0)&&(this.keystore=n),this.map=n?new j(n):new Map,this.ctx=n?new j(n):new Map,this.reg=e||(this.fastupdate?n?new j(n):new Map:n?new A(n):new Set),this.N=i.resolution||3,this.rtl=r.rtl||t.rtl||!1,this.cache=(n=t.cache||null)&&new _(n),this.resolve=!1!==t.resolve,(n=t.db)&&(this.db=this.mount(n)),this.M=!1!==t.commit,this.commit_task=[],this.commit_timer=null,this.priority=t.priority||4}function jt(t){t.commit_timer||(t.commit_timer=setTimeout(function(){t.commit_timer=null,t.db.commit(t)},1))}Ct.prototype.add=function(t,e,n,i){if(e&&(t||0===t)){if(!i&&!n&&this.reg.has(t))return this.update(t,e);i=this.depth;const c=(e=this.encoder.encode(e,!i)).length;if(c){const a=r(),f=r(),p=this.resolution;for(let r=0;r<c;r++){let d=e[this.rtl?c-1-r:r];var s=d.length;if(s&&(i||!f[d])){var o=this.score?this.score(e,d,r,null,0):vt(p,c,r),l="";switch(this.tokenize){case"tolerant":if(wt(this,f,d,o,t,n),s>2){for(let e,i,r,h,u=1;u<s-1;u++)e=d.charAt(u),i=d.charAt(u+1),r=d.substring(0,u)+i,h=d.substring(u+2),wt(this,f,l=r+e+h,o,t,n),wt(this,f,l=r+h,o,t,n);wt(this,f,d.substring(0,d.length-1),o,t,n)}break;case"full":if(s>2){for(let i,u=0;u<s;u++)for(o=s;o>u;o--){l=d.substring(u,o),i=this.rtl?s-1-u:u;var h=this.score?this.score(e,d,r,l,i):vt(p,c,r,s,i);wt(this,f,l,h,t,n)}break}case"bidirectional":case"reverse":if(s>1){for(h=s-1;h>0;h--){l=d[this.rtl?s-1-h:h]+l;var u=this.score?this.score(e,d,r,l,h):vt(p,c,r,s,h);wt(this,f,l,u,t,n)}l=""}case"forward":if(s>1){for(h=0;h<s;h++)wt(this,f,l+=d[this.rtl?s-1-h:h],o,t,n);break}default:if(wt(this,f,d,o,t,n),i&&c>1&&r<c-1)for(s=this.N,l=d,o=Math.min(i+1,this.rtl?r+1:c-r),h=1;h<o;h++)d=e[this.rtl?c-1-r-h:r+h],wt(this,a,(u=this.bidirectional&&d>l)?l:d,this.score?this.score(e,l,r,d,h-1):vt(s+(c/2>s?0:1),c,r,o-1,h-1),t,n,u?d:l)}}}this.fastupdate||this.reg.add(t)}}return this.db&&(this.commit_task.push(n?{ins:t}:{del:t}),this.M&&jt(this)),this},Ct.prototype.search=function(t,e,n){if(n||(e||"object"!=typeof t?"object"==typeof e&&(n=e,e=0):(n=t,t="")),n&&n.cache)return n.cache=!1,t=this.searchCache(t,e,n),n.cache=!0,t;let i,s,o,l,h,u,c,a,f=[],p=0;n&&(t=n.query||t,e=n.limit||e,p=n.offset||0,s=n.context,o=n.suggest,a=(l=n.resolve)&&n.enrich,u=n.boost,c=n.resolution,h=this.db&&n.tag),void 0===l&&(l=this.resolve),s=this.depth&&!1!==s;let d=this.encoder.encode(t,!s);if(i=d.length,e=e||(l?100:0),1===i)return xt.call(this,d[0],"",e,p,l,a,h);if(2===i&&s&&!o)return xt.call(this,d[1],d[0],e,p,l,a,h);let g,_=r(),m=0;if(s&&(g=d[0],m=1),c||0===c||(c=g?this.N:this.resolution),this.db){if(this.db.search&&!1!==(n=this.db.search(this,d,e,p,o,l,a,h)))return n;const t=this;return async function(){for(let e,n;m<i;m++){if((n=d[m])&&!_[n]){if(_[n]=1,e=await St(t,n,g,0,0,!1,!1),e=kt(e,f,o,c)){f=e;break}g&&(o&&e&&f.length||(g=n))}o&&g&&m===i-1&&!f.length&&(c=t.resolution,g="",m=-1,_=r())}return bt(f,c,e,p,o,u,l)}()}for(let t,e;m<i;m++){if((e=d[m])&&!_[e]){if(_[e]=1,t=St(this,e,g,0,0,!1,!1),t=kt(t,f,o,c)){f=t;break}g&&(o&&t&&f.length||(g=e))}o&&g&&m===i-1&&!f.length&&(c=this.resolution,g="",m=-1,_=r())}return bt(f,c,e,p,o,u,l)},(t=Ct.prototype).mount=function(t){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),t.mount(this)},t.commit=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this)},t.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()},t.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this},t.append=function(t,e){return this.add(t,e,!0)},t.contain=function(t){return this.db?this.db.has(t):this.reg.has(t)},t.update=function(t,e){const n=this,i=this.remove(t);return i&&i.then?i.then(()=>n.add(t,e)):this.add(t,e)},t.cleanup=function(){return this.fastupdate?(mt(this.map),this.depth&&mt(this.ctx),this):this},t.searchCache=g,t.export=function(t,e,n=0,i=0){let r,s;switch(i){case 0:r="reg",s=pt(this.reg);break;case 1:r="cfg",s=null;break;case 2:r="map",s=ut(this.map,this.reg.size);break;case 3:r="ctx",s=at(this.ctx,this.reg.size);break;default:return}return gt.call(this,t,e,r,s,n,i)},t.import=function(t,e){if(e)switch("string"==typeof e&&(e=JSON.parse(e)),t=t.split("."),"json"===t[t.length-1]&&t.pop(),3===t.length&&t.shift(),t=t.length>1?t[1]:t[0],t){case"reg":this.fastupdate=!1,this.reg=dt(e,this.reg);break;case"map":this.map=ct(e,this.map);break;case"ctx":this.ctx=ft(e,this.ctx)}},t.serialize=function(t=!0){let e="",n="",i="";if(this.reg.size){let t;for(var r of this.reg.keys())t||(t=typeof r),e+=(e?",":"")+("string"===t?'"'+r+'"':r);e="index.reg=new Set(["+e+"]);",n=_t(this.map,t),n="index.map=new Map(["+n+"]);";for(const e of this.ctx.entries()){r=e[0];let n=_t(e[1],t);n="new Map(["+n+"])",n='["'+r+'",'+n+"]",i+=(i?",":"")+n}i="index.ctx=new Map(["+i+"]);"}return t?"function inject(index){"+e+n+i+"}":e+n+i},N(Ct.prototype);const At="undefined"!=typeof window&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),Pt=["map","ctx","tag","reg","cfg"],Mt=r();function Ot(t,e,n){const i=t.value;let r,s=0;for(let t,o=0;o<i.length;o++){if(t=n?i:i[o]){for(let n,s,l=0;l<e.length;l++)if(s=e[l],n=t.indexOf(s),n>=0){if(r=1,!(t.length>1)){i[o]=[];break}t.splice(n,1)}s+=t.length}if(n)break}s?r&&t.update(i):t.delete(),t.continue()}function zt(t,e){return new Promise((n,i)=>{t.onsuccess=t.oncomplete=function(){e&&e(this.result),e=null,n(this.result)},t.onerror=t.onblocked=i,t=null})}(t=function t(e,n={}){if(!this||this.constructor!==t)return new t(e,n);"object"==typeof e&&(n=e,e=e.name),e||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(e?":"+e.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=n.field?n.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=n.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}.prototype).mount=function(t){return t.index?t.mount(this):(t.db=this,this.open())},t.open=function(){if(this.db)return this.db;let t=this;navigator.storage&&navigator.storage.persist(),Mt[t.id]||(Mt[t.id]=[]),Mt[t.id].push(t.field);const e=At.open(t.id,1);return e.onupgradeneeded=function(){const e=t.db=this.result;for(let n,i=0;i<Pt.length;i++){n=Pt[i];for(let i,r=0;r<Mt[t.id].length;r++)i=Mt[t.id][r],e.objectStoreNames.contains(n+("reg"!==n&&i?":"+i:""))||e.createObjectStore(n+("reg"!==n&&i?":"+i:""))}},t.db=zt(e,function(e){t.db=e,t.db.onversionchange=function(){t.close()}})},t.close=function(){this.db&&this.db.close(),this.db=null},t.destroy=function(){return zt(At.deleteDatabase(this.id))},t.clear=function(){const t=[];for(let e,n=0;n<Pt.length;n++){e=Pt[n];for(let n,i=0;i<Mt[this.id].length;i++)n=Mt[this.id][i],t.push(e+("reg"!==e&&n?":"+n:""))}const e=this.db.transaction(t,"readwrite");for(let n=0;n<t.length;n++)e.objectStore(t[n]).clear();return zt(e)},t.get=function(t,e,n=0,i=0,r=!0,s=!1){t=this.db.transaction((e?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((e?"ctx":"map")+(this.field?":"+this.field:"")).get(e?e+":"+t:t);const o=this;return zt(t).then(function(t){let e=[];if(!t||!t.length)return e;if(r){if(!n&&!i&&1===t.length)return t[0];for(let r,s=0;s<t.length;s++)if((r=t[s])&&r.length){if(i>=r.length){i-=r.length;continue}const t=n?i+Math.min(r.length-i,n):r.length;for(let n=i;n<t;n++)e.push(r[n]);if(i=0,e.length===n)break}return s?o.enrich(e):e}return t})},t.tag=function(t,e=0,n=0,i=!1){t=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(t);const r=this;return zt(t).then(function(t){return!t||!t.length||n>=t.length?[]:e||n?(t=t.slice(n,n+e),i?r.enrich(t):t):t})},t.enrich=function(t){"object"!=typeof t&&(t=[t]);const e=this.db.transaction("reg","readonly").objectStore("reg"),n=[];for(let i=0;i<t.length;i++)n[i]=zt(e.get(t[i]));return Promise.all(n).then(function(e){for(let n=0;n<e.length;n++)e[n]={id:t[n],doc:e[n]?JSON.parse(e[n]):null};return e})},t.has=function(t){return zt(t=this.db.transaction("reg","readonly").objectStore("reg").getKey(t)).then(function(t){return!!t})},t.search=null,t.info=function(){},t.transaction=function(t,e,n){t+="reg"!==t&&this.field?":"+this.field:"";let i=this.h[t+":"+e];if(i)return n.call(this,i);let r=this.db.transaction(t,e);this.h[t+":"+e]=i=r.objectStore(t);const s=n.call(this,i);return this.h[t+":"+e]=null,zt(r).finally(function(){return r=i=null,s})},t.commit=async function(t){let e=t.commit_task,n=[];t.commit_task=[];for(let t,i=0;i<e.length;i++)t=e[i],t.del&&n.push(t.del);n.length&&await this.remove(n),t.reg.size&&(await this.transaction("map","readwrite",function(e){for(const n of t.map){const t=n[0],i=n[1];i.length&&(e.get(t).onsuccess=function(){let n=this.result;var r;if(n&&n.length){const t=Math.max(n.length,i.length);for(let e,s,o=0;o<t;o++)if((s=i[o])&&s.length){if((e=n[o])&&e.length)for(r=0;r<s.length;r++)e.push(s[r]);else n[o]=s;r=1}}else n=i,r=1;r&&e.put(n,t)})}}),await this.transaction("ctx","readwrite",function(e){for(const n of t.ctx){const t=n[0],i=n[1];for(const n of i){const i=n[0],r=n[1];r.length&&(e.get(t+":"+i).onsuccess=function(){let n=this.result;var s;if(n&&n.length){const t=Math.max(n.length,r.length);for(let e,i,o=0;o<t;o++)if((i=r[o])&&i.length){if((e=n[o])&&e.length)for(s=0;s<i.length;s++)e.push(i[s]);else n[o]=i;s=1}}else n=r,s=1;s&&e.put(n,t+":"+i)})}}}),t.store?await this.transaction("reg","readwrite",function(e){for(const n of t.store){const t=n[0],i=n[1];e.put("object"==typeof i?JSON.stringify(i):1,t)}}):t.bypass||await this.transaction("reg","readwrite",function(e){for(const n of t.reg.keys())e.put(1,n)}),t.tag&&await this.transaction("tag","readwrite",function(e){for(const n of t.tag){const t=n[0],i=n[1];i.length&&(e.get(t).onsuccess=function(){let n=this.result;n=n&&n.length?n.concat(i):i,e.put(n,t)})}}),t.map.clear(),t.ctx.clear(),t.tag&&t.tag.clear(),t.store&&t.store.clear(),t.document||t.reg.clear())},t.remove=function(t){return"object"!=typeof t&&(t=[t]),Promise.all([this.transaction("map","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Ot(e,t)}}),this.transaction("ctx","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Ot(e,t)}}),this.transaction("tag","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Ot(e,t,!0)}}),this.transaction("reg","readwrite",function(e){for(let n=0;n<t.length;n++)e.delete(t[n])})])};const Bt=k,Lt=ot;var Rt,Dt,Nt,Tt,Et,It,Ft,Ut,$t,qt,Ht,Wt={},Jt=[],Kt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Gt=Array.isArray;function Vt(t,e){for(var n in e)t[n]=e[n];return t}function Zt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Qt(t,e,n){var i,r,s,o={};for(s in e)"key"==s?i=e[s]:"ref"==s?r=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?Rt.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(s in t.defaultProps)void 0===o[s]&&(o[s]=t.defaultProps[s]);return Xt(t,o,i,r,null)}function Xt(t,e,n,i,r){var s={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==r?++Nt:r,__i:-1,__u:0};return null==r&&null!=Dt.vnode&&Dt.vnode(s),s}function Yt(t){return t.children}function te(t,e){this.props=t,this.context=e}function ee(t,e){if(null==e)return t.__?ee(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?ee(t):null}function ne(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return ne(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&Tt.push(t)&&!re.__r++||Et!=Dt.debounceRendering)&&((Et=Dt.debounceRendering)||It)(re)}function re(){for(var t,e,n,i,r,s,o,l=1;Tt.length;)Tt.length>l&&Tt.sort(Ft),t=Tt.shift(),l=Tt.length,t.__d&&(n=void 0,r=(i=(e=t).__v).__e,s=[],o=[],e.__P&&((n=Vt({},i)).__v=i.__v+1,Dt.vnode&&Dt.vnode(n),fe(e.__P,n,i,e.__n,e.__P.namespaceURI,32&i.__u?[r]:null,s,null==r?ee(i):r,!!(32&i.__u),o),n.__v=i.__v,n.__.__k[n.__i]=n,de(s,n,o),n.__e!=r&&ne(n)));re.__r=0}function se(t,e,n,i,r,s,o,l,h,u,c){var a,f,p,d,g,_,m,y=i&&i.__k||Jt,w=e.length;for(h=oe(n,e,y,h,w),a=0;a<w;a++)null!=(p=n.__k[a])&&(f=-1==p.__i?Wt:y[p.__i]||Wt,p.__i=a,_=fe(t,p,f,r,s,o,l,h,u,c),d=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&me(f.ref,null,p),c.push(p.ref,p.__c||d,p)),null==g&&null!=d&&(g=d),(m=!!(4&p.__u))||f.__k===p.__k?h=le(p,h,t,m):"function"==typeof p.type&&void 0!==_?h=_:d&&(h=d.nextSibling),p.__u&=-7);return n.__e=g,h}function oe(t,e,n,i,r){var s,o,l,h,u,c=n.length,a=c,f=0;for(t.__k=new Array(r),s=0;s<r;s++)null!=(o=e[s])&&"boolean"!=typeof o&&"function"!=typeof o?(h=s+f,(o=t.__k[s]="string"==typeof o||"number"==typeof o||"bigint"==typeof o||o.constructor==String?Xt(null,o,null,null,null):Gt(o)?Xt(Yt,{children:o},null,null,null):null==o.constructor&&o.__b>0?Xt(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,l=null,-1!=(u=o.__i=he(o,n,h,a))&&(a--,(l=n[u])&&(l.__u|=2)),null==l||null==l.__v?(-1==u&&(r>c?f--:r<c&&f++),"function"!=typeof o.type&&(o.__u|=4)):u!=h&&(u==h-1?f--:u==h+1?f++:(u>h?f--:f++,o.__u|=4))):t.__k[s]=null;if(a)for(s=0;s<c;s++)null!=(l=n[s])&&!(2&l.__u)&&(l.__e==i&&(i=ee(l)),ye(l,l));return i}function le(t,e,n,i){var r,s;if("function"==typeof t.type){for(r=t.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=t,e=le(r[s],e,n,i));return e}t.__e!=e&&(i&&(e&&t.type&&!e.parentNode&&(e=ee(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do{e=e&&e.nextSibling}while(null!=e&&8==e.nodeType);return e}function he(t,e,n,i){var r,s,o,l=t.key,h=t.type,u=e[n],c=null!=u&&!(2&u.__u);if(null===u&&null==t.key||c&&l==u.key&&h==u.type)return n;if(i>(c?1:0))for(r=n-1,s=n+1;r>=0||s<e.length;)if(null!=(u=e[o=r>=0?r--:s++])&&!(2&u.__u)&&l==u.key&&h==u.type)return o;return-1}function ue(t,e,n){"-"==e[0]?t.setProperty(e,null==n?"":n):t[e]=null==n?"":"number"!=typeof n||Kt.test(e)?n:n+"px"}function ce(t,e,n,i,r){var s,o;t:if("style"==e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof i&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||ue(t.style,e,"");if(n)for(e in n)i&&n[e]==i[e]||ue(t.style,e,n[e])}else if("o"==e[0]&&"n"==e[1])s=e!=(e=e.replace(Ut,"$1")),o=e.toLowerCase(),e=o in t||"onFocusOut"==e||"onFocusIn"==e?o.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?i?n.u=i.u:(n.u=$t,t.addEventListener(e,s?Ht:qt,s)):t.removeEventListener(e,s?Ht:qt,s);else{if("http://www.w3.org/2000/svg"==r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&"popover"!=e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null==n||!1===n&&"-"!=e[4]?t.removeAttribute(e):t.setAttribute(e,"popover"==e&&1==n?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(null==e.t)e.t=$t++;else if(e.t<n.u)return;return n(Dt.event?Dt.event(e):e)}}}function fe(t,e,n,i,r,s,o,l,h,u){var c,a,f,p,d,g,_,m,y,w,v,b,x,k,S,C,j,A=e.type;if(null!=e.constructor)return null;128&n.__u&&(h=!!(32&n.__u),s=[l=e.__e=n.__e]),(c=Dt.__b)&&c(e);t:if("function"==typeof A)try{if(m=e.props,y="prototype"in A&&A.prototype.render,w=(c=A.contextType)&&i[c.__c],v=c?w?w.props.value:c.__:i,n.__c?_=(a=e.__c=n.__c).__=a.__E:(y?e.__c=a=new A(m,v):(e.__c=a=new te(m,v),a.constructor=A,a.render=we),w&&w.sub(a),a.props=m,a.state||(a.state={}),a.context=v,a.__n=i,f=a.__d=!0,a.__h=[],a._sb=[]),y&&null==a.__s&&(a.__s=a.state),y&&null!=A.getDerivedStateFromProps&&(a.__s==a.state&&(a.__s=Vt({},a.__s)),Vt(a.__s,A.getDerivedStateFromProps(m,a.__s))),p=a.props,d=a.state,a.__v=e,f)y&&null==A.getDerivedStateFromProps&&null!=a.componentWillMount&&a.componentWillMount(),y&&null!=a.componentDidMount&&a.__h.push(a.componentDidMount);else{if(y&&null==A.getDerivedStateFromProps&&m!==p&&null!=a.componentWillReceiveProps&&a.componentWillReceiveProps(m,v),!a.__e&&null!=a.shouldComponentUpdate&&!1===a.shouldComponentUpdate(m,a.__s,v)||e.__v==n.__v){for(e.__v!=n.__v&&(a.props=m,a.state=a.__s,a.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(t){t&&(t.__=e)}),b=0;b<a._sb.length;b++)a.__h.push(a._sb[b]);a._sb=[],a.__h.length&&o.push(a);break t}null!=a.componentWillUpdate&&a.componentWillUpdate(m,a.__s,v),y&&null!=a.componentDidUpdate&&a.__h.push(function(){a.componentDidUpdate(p,d,g)})}if(a.context=v,a.props=m,a.__P=t,a.__e=!1,x=Dt.__r,k=0,y){for(a.state=a.__s,a.__d=!1,x&&x(e),c=a.render(a.props,a.state,a.context),S=0;S<a._sb.length;S++)a.__h.push(a._sb[S]);a._sb=[]}else do{a.__d=!1,x&&x(e),c=a.render(a.props,a.state,a.context),a.state=a.__s}while(a.__d&&++k<25);a.state=a.__s,null!=a.getChildContext&&(i=Vt(Vt({},i),a.getChildContext())),y&&!f&&null!=a.getSnapshotBeforeUpdate&&(g=a.getSnapshotBeforeUpdate(p,d)),C=c,null!=c&&c.type===Yt&&null==c.key&&(C=ge(c.props.children)),l=se(t,Gt(C)?C:[C],e,n,i,r,s,o,l,h,u),a.base=e.__e,e.__u&=-161,a.__h.length&&o.push(a),_&&(a.__E=a.__=null)}catch(t){if(e.__v=null,h||null!=s)if(t.then){for(e.__u|=h?160:128;l&&8==l.nodeType&&l.nextSibling;)l=l.nextSibling;s[s.indexOf(l)]=null,e.__e=l}else{for(j=s.length;j--;)Zt(s[j]);pe(e)}else e.__e=n.__e,e.__k=n.__k,t.then||pe(e);Dt.__e(t,e,n)}else null==s&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):l=e.__e=_e(n.__e,e,n,i,r,s,o,h,u);return(c=Dt.diffed)&&c(e),128&e.__u?void 0:l}function pe(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(pe)}function de(t,e,n){for(var i=0;i<n.length;i++)me(n[i],n[++i],n[++i]);Dt.__c&&Dt.__c(e,t),t.some(function(e){try{t=e.__h,e.__h=[],t.some(function(t){t.call(e)})}catch(t){Dt.__e(t,e.__v)}})}function ge(t){return"object"!=typeof t||null==t||t.__b&&t.__b>0?t:Gt(t)?t.map(ge):Vt({},t)}function _e(t,e,n,i,r,s,o,l,h){var u,c,a,f,p,d,g,_=n.props,m=e.props,y=e.type;if("svg"==y?r="http://www.w3.org/2000/svg":"math"==y?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=s)for(u=0;u<s.length;u++)if((p=s[u])&&"setAttribute"in p==!!y&&(y?p.localName==y:3==p.nodeType)){t=p,s[u]=null;break}if(null==t){if(null==y)return document.createTextNode(m);t=document.createElementNS(r,y,m.is&&m),l&&(Dt.__m&&Dt.__m(e,s),l=!1),s=null}if(null==y)_===m||l&&t.data==m||(t.data=m);else{if(s=s&&Rt.call(t.childNodes),_=n.props||Wt,!l&&null!=s)for(_={},u=0;u<t.attributes.length;u++)_[(p=t.attributes[u]).name]=p.value;for(u in _)if(p=_[u],"children"==u);else if("dangerouslySetInnerHTML"==u)a=p;else if(!(u in m)){if("value"==u&&"defaultValue"in m||"checked"==u&&"defaultChecked"in m)continue;ce(t,u,null,p,r)}for(u in m)p=m[u],"children"==u?f=p:"dangerouslySetInnerHTML"==u?c=p:"value"==u?d=p:"checked"==u?g=p:l&&"function"!=typeof p||_[u]===p||ce(t,u,p,_[u],r);if(c)l||a&&(c.__html==a.__html||c.__html==t.innerHTML)||(t.innerHTML=c.__html),e.__k=[];else if(a&&(t.innerHTML=""),se("template"==e.type?t.content:t,Gt(f)?f:[f],e,n,i,"foreignObject"==y?"http://www.w3.org/1999/xhtml":r,s,o,s?s[0]:n.__k&&ee(n,0),l,h),null!=s)for(u=s.length;u--;)Zt(s[u]);l||(u="value","progress"==y&&null==d?t.removeAttribute("value"):null!=d&&(d!==t[u]||"progress"==y&&!d||"option"==y&&d!=_[u])&&ce(t,u,d,_[u],r),u="checked",null!=g&&g!=t[u]&&ce(t,u,g,_[u],r))}return t}function me(t,e,n){try{if("function"==typeof t){var i="function"==typeof t.__u;i&&t.__u(),i&&null==e||(t.__u=t(e))}else t.current=e}catch(t){Dt.__e(t,n)}}function ye(t,e,n){var i,r;if(Dt.unmount&&Dt.unmount(t),(i=t.ref)&&(i.current&&i.current!=t.__e||me(i,null,e)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(t){Dt.__e(t,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&ye(i[r],e,n||"function"!=typeof t.type);n||Zt(t.__e),t.__c=t.__=t.__e=void 0}function we(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var i,r,s,o;e==document&&(e=document.documentElement),Dt.__&&Dt.__(t,e),r=(i="function"==typeof n)?null:n&&n.__k||e.__k,s=[],o=[],fe(e,t=(!i&&n||e).__k=Qt(Yt,null,[t]),r||Wt,Wt,e.namespaceURI,!i&&n?[n]:r?null:e.firstChild?Rt.call(e.childNodes):null,s,!i&&n?n:r?r.__e:e.firstChild,i,o),de(s,t,o)}Rt=Jt.slice,Dt={__e:function(t,e,n,i){for(var r,s,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&null!=s.getDerivedStateFromError&&(r.setState(s.getDerivedStateFromError(t)),o=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(t,i||{}),o=r.__d),o)return r.__E=r}catch(e){t=e}throw t}},Nt=0,te.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=Vt({},this.state),"function"==typeof t&&(t=t(Vt({},n),this.props)),t&&Vt(n,t),null!=t&&this.__v&&(e&&this._sb.push(e),ie(this))},te.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},te.prototype.render=Yt,Tt=[],It="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ft=function(t,e){return t.__v.__b-e.__v.__b},re.__r=0,Ut=/(PointerCapture)$|Capture$/i,$t=0,qt=ae(!1),Ht=ae(!0);var be=window.searchTranslation,xe=be.Link_previous,ke=be.Link_next,Se=be.Search_no_results,Ce=be.Search_one_character_or_more,je=be.Search_one_result,Ae=be.Search_results,Pe=be.Search_should_be_x_or_more,Me=be.Search_too_short,Oe=xe,ze=ke,Be=Se,Le=Ce,Re=je,De=Ae,Ne=Pe,Te=Me;function Ee(t){var e,n=function(t){t===h?u.push(Qt("li",{className:"current"},t+1)):u.push(Qt("li",null,Qt("button",{type:"button",className:"SearchResults__footer__link",onClick:function(){return o(t*s.show)}},t+1)))},i=t.counter,r=t.start,s=t.settings,o=t.onPageSelect,l=Math.ceil(i/s.show),h=r/s.show;e=h<=2?Math.min(l,3):Math.min(l,h+2);for(var u=[],c=0;c<e;c++)n(c);return Qt("div",{className:"SearchResults__footer"},Qt("ul",{className:"SearchResults__footer__links Pager"},r>0&&Qt("li",{className:"Pager--prev"},Qt("button",{type:"button",className:"SearchResults__footer__link",onClick:function(){return o(r-s.show)}},Oe)),u,h+1!==l&&Qt("li",{className:"Pager--next"},Qt("button",{type:"button",className:"SearchResults__footer__link",onClick:function(){return o(r+s.show)}},ze))))}function Ie(t){var e,n=t.settings,i=t.item;return i.text&&(e=i.text.split(" ").slice(0,n.descriptiveWords).join(" "),i.text.length<e.length&&"."!==e.charAt(e.length-1)&&(e+=" ...")),Qt("div",{className:"SearchResult"},Qt("div",{className:"SearchResults__title"},Qt("a",{href:n.base_url+i.url},i.title)),n.showURL&&Qt("div",{className:"SearchResults__url"},Qt("a",{href:n.base_url+i.url},i.url.toLowerCase().replace(/https?:\/\//g,""))),e&&Qt("div",{className:"SearchResults__text"},e))}function Fe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ue(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function $e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qe(t){return qe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},qe(t)}function He(t,e){return He=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},He(t,e)}function We(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=qe(t);if(e){var r=qe(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){return!e||"object"!=((n=e)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof e?Fe(t):e;var n}(this,n)}}var Je=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&He(t,e)}(r,t);var e,n,i=We(r);function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),$e(Fe(e=i.call(this,t)),"handleClose",function(){e.props.onClose()}),$e(Fe(e),"scrollTop",function(){e.resultRef&&(e.resultRef.scrollTop=0)}),$e(Fe(e),"handlePaginate",function(t){e.setState({start:t},e.scrollTop)}),$e(Fe(e),"handleChange",function(t){e.setState({search:t.target.value,start:0},e.scrollTop),e.props.settings.field.value=t.target.value}),e.state={search:e.props.settings.field.value||"",start:0},e}return e=r,(n=[{key:"getResults",value:function(){var t=this.props.settings,e=this.state.start,n=[],i=0,r=[];if(this.state.search.length<t.minimumLength)return n.push(Te),n.push(1===t.minimumLength?Le:Ne.replace("!min",t.minimumLength)),{warnings:n,counter:i,results:r,start:e};var s=Object.values(this.props.onSearch(this.state.search).reduce(function(t,e){var n=!0,i=!1,r=void 0;try{for(var s,o=e.result[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;t.hasOwnProperty(l.id)||(t[l.id]={url:l.id,title:l.doc.title,text:l.doc.text})}}catch(t){i=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t},{}));return 0===(i=s.length)?(n.push(Be),{warnings:n,counter:i,results:r,start:e}):(t.showTitleCount&&this.props.onTitleChange("(".concat(i,")")),{warnings:n,counter:i,results:r=s.filter(function(n,i){return i>=e&&i<t.show+e}),start:e})}},{key:"render",value:function(){var t=this,e=this.props.settings,n=this.getResults(),i=n.warnings,r=n.counter,s=n.results,o=n.start;return Qt("div",null,Qt("div",{className:"SearchResultsBackdrop"}),Qt("div",{className:"SearchResults",ref:function(e){t.resultRef=e}},Qt("input",{className:"Search__field",placeholder:"Search...",autoComplete:"on",autoSave:"text_search",type:"search",value:this.state.search,onInput:this.handleChange}),Qt("button",{type:"button",className:"SearchResults__close",onClick:this.handleClose},"Ã—"),Qt("div",{className:"SearchResults__count"},1===r?Re:De.replace("!count",r)),i.map(function(t){return Qt("div",{key:t,className:"SearchResults__warning"},t)}),s.map(function(t){return Qt(Ie,{key:t.title,item:t,settings:e})}),r>e.show&&Qt(Ee,{counter:r,start:o,settings:e,onPageSelect:this.handlePaginate})))}}])&&Ue(e.prototype,n),r}(te);function Ke(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ge(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ve=document.title;function Ze(t){var e=new RegExp("[?|&]".concat(t,"=([^&;]+?)(&|#|;|$)")).exec(window.location.search);return decodeURIComponent(((null==e?void 0:e[1])||"").replace(/\+/g,"%20"))||null}var Qe=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ge(this,"keyUpHandler",function(t){27===t.which&&n.handleClose()}),Ge(this,"handleClose",function(){document.title=Ve,document.removeEventListener("keyup",n.keyUpHandler),document.body.classList.remove("with-search"),ve(null,n.resultContainer),n.resultContainer=null}),this.settings=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){Ge(t,e,n[e])})}return t}({field:document.getElementById("search_input"),form:document.getElementById("search_form"),show:10,showURL:!0,showTitleCount:!0,minimumLength:3,descriptiveWords:25,highlightTerms:!0,highlightEveryTerm:!1,contentLocation:"daux_search_index.js"},e),this.searchIndex={pages:[]}}var e,n;return e=t,n=[{key:"loadData",value:function(){var t=this;if(!this.loadingPromise){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=this.settings.base_url+this.settings.contentLocation;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n),this.loadingPromise=new Promise(function(t){window.load_search_index=function(e){return t(e)}}).then(function(e){t.searchIndex=new Lt({document:{id:"url",store:!0,index:[{field:"title",tokenize:"forward",encoder:Bt.LatinBalance},{field:"text",tokenize:"forward",encoder:Bt.LatinBalance}],tag:[{field:"tags"}]}});var n=e.pages;if(window.searchLanguage){var i="".concat(window.searchLanguage,"/");n=n.filter(function(t){return 0===t.url.indexOf(i)})}var r=!0,s=!1,o=void 0;try{for(var l,h=n[Symbol.iterator]();!(r=(l=h.next()).done);r=!0){var u=l.value;t.searchIndex.add(u)}}catch(t){s=!0,o=t}finally{try{r||null==h.return||h.return()}finally{if(s)throw o}}})}return this.loadingPromise}},{key:"run",value:function(){var t=this;Ze("q")&&(this.settings.field.value=Ze("q"),this.loadData().then(function(){t.displaySearch()})),this.settings.field.addEventListener("keyup",function(e){t.loadData(),13===Number.parseInt(e.keyCode,10)&&t.loadData().then(function(){t.displaySearch()})}),this.settings.form.addEventListener("submit",function(e){e.preventDefault(),t.loadData().then(function(){t.displaySearch()})})}},{key:"displaySearch",value:function(){var t=this;this.resultContainer||(this.resultContainer=document.createElement("div"),document.body.appendChild(this.resultContainer)),document.addEventListener("keyup",this.keyUpHandler),ve(Qt(Je,{onSearch:function(e){return t.searchIndex.search(e,{enrich:!0})},onClose:this.handleClose,onTitleChange:function(t){document.title="".concat(t," ").concat(Ve)},settings:this.settings}),this.resultContainer),document.body.classList.add("with-search"),document.body.scrollTop=0}}],n&&Ke(e.prototype,n),t}();window.search=function(t){new Qe(t).run()}})()})();
//# sourceMappingURL=search.min.js.map